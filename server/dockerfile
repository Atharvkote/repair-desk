FROM node:20-alpine

RUN corepack enable && corepack prepare pnpm@9.0.0 --activate

WORKDIR /app

COPY server/package.json server/pnpm-lock.yaml ./

RUN pnpm install --frozen-lockfile --prod

COPY server ./

EXPOSE 5000

CMD ["pnpm", "start"]
